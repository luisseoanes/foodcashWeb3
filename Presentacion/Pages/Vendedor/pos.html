<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>FC - Sistema POS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5, minimum-scale=1.0">
  <meta name="description" content="Sistema POS para cafeterías escolares FoodCash">
  <meta name="author" content="Luis Seoanes">
  <link rel="apple-touch-icon" href="img/logo-200x200.png">
  <link rel="stylesheet" href="../../css/General.css">
  <link rel="stylesheet" href="../../css/pos.css">
  <link rel="shortcut icon" type="image/x-icon" href="../../img/FC.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="wrapper collapse">
    <!-- Barra superior -->
    <div class="top_navbar">
      <div class="hamburger" id="sidebar-toggle">
        <div class="one"></div>
        <div class="two"></div>
        <div class="three"></div>
      </div>
      <div class="top_menu">
        <div class="logo">FoodCash - POS</div>
        <div class="logo-container">
          <img src="../../img/FC.png" width="50" height="50" alt="Logo FoodCash">

        </div>
        <div class="user-info">
          <span id="nombre-usuario">Usuario</span>
          <span class="role">Vendedor</span>
        </div>
        <ul class="nav-actions">
          <li>
            <a href="#" id="refresh-btn" title="Actualizar">
              <i class="fas fa-sync-alt"></i>
            </a>
          </li>
          <li>
            <a href="../../logout.html" title="Cerrar Sesión">
              <i class="fas fa-sign-out-alt"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Barra lateral -->
    <div class="sidebar">
      <ul>
                <li><a href="pos.html" class="active"><span class="icon"><i class="fas fa-cash-register"></i></span><span class="title">Ventas</span></a></li>
                <li><a href="precompra.html"><span class="icon"><i class="fas fa-box-open"></i></span><span class="title">Entregas</span></a></li>
                <li><a href="ayuda.html" ><span class="icon"><i class="fas fa-question-circle"></i></span><span class="title">Ayuda</span></a></li>
                <li><a href="configuracion.html"><span class="icon"><i class="fas fa-cog"></i></span><span class="title">Configuración</span></a></li>

              </div>

    <!-- Contenido principal -->
    <div class="main_container">
      <!-- Sección de búsqueda de estudiante -->
      <div class="search-section">
        <div class="card">
          <h2><i class="fas fa-user-graduate"></i> Buscar Estudiante</h2>
          <form id="student-search-form">
            <div class="input-group">
              <input type="text" id="student-id" placeholder="ID o nombre del estudiante" required>
              <button type="submit" class="search-btn"><i class="fas fa-search"></i> Buscar</button>
            </div>
          </form>
        </div>
        <div class="card student-info" id="student-details" style="display: none;">
          <div class="student-header">
            <i class="fas fa-user-circle avatar"></i>
            <div>
              <h3 id="student-name">Nombre del Estudiante</h3>
              <p>ID: <span id="display-student-id">12345</span></p>
            </div>
          </div>
          <div class="student-balance">
            <div>
              <small>Saldo Disponible</small>
              <h3 id="student-balance">$0.00</h3>
            </div>
            <div class="restrictions" id="student-restrictions">
              <!-- Restricciones se mostrarán aquí -->
            </div>
          </div>
        </div>
      </div>

      <!-- Sección de Productos y Carrito -->
      <div class="container-flex">
        <!-- Sección de Productos -->
        <div class="products-container">
          <div class="card">
            <div class="card-header">
              <h2><i class="fas fa-utensils"></i> Productos Disponibles</h2>
              <div class="category-filter">
                <button class="filter-btn active" data-category="all">Todos</button>
                <button class="filter-btn" data-category="bebida">Bebidas</button>
                <button class="filter-btn" data-category="snack">Snacks</button>
                <button class="filter-btn" data-category="comida">Comidas</button>
              </div>
            </div>
            <div class="search-bar">
              <input type="text" id="product-search" placeholder="Buscar producto...">
              <i class="fas fa-search"></i>
            </div>
            <!-- Contenedor donde se mostrarán los productos -->
            <div class="products-grid"></div>
          </div>
        </div>

        <!-- Panel lateral: Carrito y Últimas Ventas -->
        <div class="side-panel">
          <div class="card cart-container">
            <div class="card-header">
              <h3><i class="fas fa-shopping-cart"></i> Ticket de Venta</h3>
              <button class="clear-cart" title="Limpiar carrito"><i class="fas fa-trash"></i></button>
            </div>
            <div class="cart-items-container">
              <ul class="cart-items">
                <div class="empty-cart-message">
                  <i class="fas fa-shopping-basket"></i>
                  <p>Carrito vacío</p>
                </div>
              </ul>
            </div>
            <div class="cart-summary">
              <div class="summary-item">
                <span>Subtotal:</span>
                <span class="subtotal">$0</span>
              </div>

              <div class="summary-item total">
                <span>Total:</span>
                <span class="total-amount">$0</span>
              </div>
            </div>
            <div class="cart-actions">
              <button class="checkout-btn" disabled><i class="fas fa-check-circle"></i> Finalizar Venta</button>
            </div>
          </div>
          <div class="card recent-sales">
            <h3><i class="fas fa-history"></i> Últimas Ventas</h3>
            <ul class="sales-list">
              <!-- Se llenará dinámicamente -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de confirmación de venta -->
  <div class="modal" id="confirm-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-check-circle"></i> Confirmar Venta</h3>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <p>¿Está seguro de finalizar la venta para <strong id="confirm-student-name">Nombre del Estudiante</strong>?</p>
        <div class="summary-container">
          <div class="summary-item">
            <span>Total a pagar:</span>
            <span id="confirm-total">$0</span>
          </div>
          <div class="summary-item">
            <span>Saldo actual:</span>
            <span id="confirm-balance">$0</span>
          </div>
          <div class="summary-item">
            <span>Saldo después de la compra:</span>
            <span id="confirm-new-balance">$0</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancel-sale" class="btn-secondary"><i class="fas fa-times"></i> Cancelar</button>
        <button id="confirm-sale" class="btn-primary"><i class="fas fa-check"></i> Confirmar</button>
      </div>
    </div>
  </div>

  <!-- Modal de venta exitosa -->
  <div class="modal" id="success-modal">
    <div class="modal-content">
      <div class="modal-header success">
        <h3><i class="fas fa-check-circle"></i> Venta Exitosa</h3>
        <span class="close-modal">&times;</span>
      </div>
      <div class="modal-body">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <p>La venta se ha procesado correctamente</p>
        <div class="receipt-info">
          <p>Estudiante: <span id="receipt-student">Nombre del Estudiante</span></p>
          <p>Total: <span id="receipt-total">$0</span></p>
          <p>Nuevo saldo: <span id="receipt-balance">$0</span></p>
          <p>Fecha: <span id="receipt-date">01/01/2025</span></p>
        </div>
      </div>
      <div class="modal-footer">
        <button id="print-receipt" class="btn-secondary"><i class="fas fa-print"></i> Imprimir</button>
        <button id="new-sale" class="btn-primary"><i class="fas fa-plus"></i> Nueva Venta</button>
      </div>
    </div>
  </div>

  <!-- Contenedor para notificaciones -->
  <div id="notification-container"></div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../../js/vendedor/POS.js"></script>
  <script src="../../js/general.js"></script>
</body>
</html>
